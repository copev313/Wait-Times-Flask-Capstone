
{% extends 'dash_base.html' %}

{% block title %}Create New User{% endblock title %}

{% block dash_content %}
<div class="text-left pb-4">
    <div>
        <h2 class="text-5xl font-bold text-gray-700">
            Create New User Account
        </h2>
    </div>

    <div class="min-h-full py-6 flex flex-col justify-center sm:py-12">
        <div class="relative py-3 sm:max-w-xl sm:mx-auto">
            <div class="relative px-4 py-10 bg-gray-100 mx-8 md:mx-0 shadow-xl rounded-3xl sm:p-10">

                <div>
                    <h3 class="text-4xl text-gray-700 font-semibold underline pb-6">
                        Account Information
                    </h3>
                </div>

                <form class="mt-4 space-y-6" action="" method="POST">

                    {{ form.csrf_token }}
            
                    <div class="rounded-md shadow-sm -space-y-px">
                        <div class="py-2">
                            {{ form.username.label(class="sr-only") }}
                            {{ form.username(class="appearance-none relative block rounded-md w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm") }}
                        </div>
            
                        <div class="py-2">
                            {{ form.email.label(class="sr-only") }}
                            {{ form.email(class="appearance-none relative block rounded-md w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm") }}
                        </div>
            
                        <div class="py-2">
                            {{ form.password.label(class="sr-only") }}
                            {{ form.password(class="appearance-none relative block w-full rounded-md px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm") }}
                        </div>
            
                        <div class="py-2">
                            {{ form.confirm_password.label(class="sr-only") }}
                            {{ form.confirm_password(class="appearance-none relative block w-full rounded-md px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm") }}
                        </div>
                    </div>

                    <div class="ml-4">
                        {{ form.admin.label }}
                        {{ form.admin(class="ml-3") }}
                    </div>

                    <hr>

                    <div>
                        {{ form.submit(class="cursor-pointer group relative w-1/2 mx-auto rounded-md flex justify-center py-2 px-4 border border-transparent text-sm font-medium text-white bg-yellow-500 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400") }}
                    </div>

                    <!-- Handle error messages -->
                    {% if form.errors %}
                        <div class="text-center text-pink-600 font-semibold text-lg pt-1">
                            {% for field in form.errors %}
                                {% for error in form.errors[field] %}
                                    <p> {{ field.label }} {{ error }} </p>
                                {% endfor %}
                            {% endfor %}
                        </div>
                    {% endif %}
                </form>
            </div>

                <!-- Handle error messages -->
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <div class="text-center text-pink-600 font-semibold text-lg pt-2">
                            {% for category, message in messages %}
                                <div class="{% if category == 'success' %} text-green-500 {% elif category =='info' %} text-blue-500 {% else %} text-pink-600 {% endif %}">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                {% endwith %}
        </div>
    </div>

    <div class="absolute top-1 right-1 my-3 mx-6 border border-gray-500 rounded-lg px-2">
        <a href="{{ url_for('admin.manage_users') }}"
            class="font-bold text-lg text-blue-700">BACK</a>
    </div>
</div>
{% endblock dash_content %}