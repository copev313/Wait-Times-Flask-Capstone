{% extends 'dash_base.html' %}

{% block title %}Account Settings{% endblock title %}

{% block dash_content %}
<div class="text-left pb-4">
  <div>
    <h2 class="text-5xl font-bold text-gray-700">
      Account Settings
    </h2>
  </div>

  <div class="min-h-full py-6 flex flex-col justify-center sm:py-12">
    <div class="relative py-3 sm:max-w-xl sm:mx-auto">
      <div class="relative px-4 py-10 bg-gray-100 mx-8 md:mx-0 shadow-xl rounded-3xl sm:p-10">
          
          <form class="mt-4 space-y-8" action="" method="POST">
            <input type="hidden" name="remember" value="true" />
            <div class="rounded-md shadow-sm -space-y-px">
              <div>
                <h3 class="text-4xl text-gray-700 font-semibold underline pb-6">
                  Update Information
                </h3>
              </div>
              
              <div class="py-2">
                <label for="username" class="sr-only">Username</label>
                <input  id="username"
                        name="username"
                        type="username"
                        value="{{ request.form.username }}"
                        minlength="3"
                        maxlength="16"
                        class="appearance-none relative block rounded-md w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm"
                        placeholder="Username"
                />
              </div>

              <div class="py-2">
                <label for="email-address" class="sr-only">Email Address</label>
                <input  id="email-address"
                        name="email"
                        type="email"
                        value="{{ request.form.email }}"
                        class="appearance-none relative block rounded-md w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm"
                        placeholder="Email Address"
                />
              </div>

              <hr class="p-4">

              <div class="py-2">
                <label for="password" class="sr-only">Updated Password</label>
                <input  id="password"
                        name="password"
                        type="password"
                        value="{{ request.form.password }}"
                        pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                        title="Must contain at least one number, one uppercase and lowercase letter, and have at least 8 characters."
                        class="appearance-none relative block w-full rounded-md px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm"
                        placeholder="Password"
                >
              </div>
              <div class="py-2">
                <label for="password-confirm" class="sr-only">Confirm Password</label>
                <input  id="password-confirm"
                        name="password-confirm"
                        type="password"
                        value="{{ request.form.confirm_password }}"
                        minlength="8"
                        class="appearance-none relative block w-full rounded-md px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 focus:z-10 sm:text-sm"
                        placeholder="Confirm Password"
                >
              </div>
            </div>
    
            <div>
              <button type="submit" class="group relative w-1/3 mx-auto rounded-md flex justify-center py-2 px-4 border border-transparent text-base font-medium text-white bg-yellow-500 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400">
                Update
              </button>
            </div>
    
          <!-- Handle error messages -->
            {% with messages = get_flashed_messages() %}
              {% if messages %}
                <div class="text-center text-pink-600 font-bold text-lg pt-2">

                  {% for message in messages %}
                    {% if message.startswith('Update') %}
                      <div class="text-green-400">
                        {{ message }}
                      </div>
                    {% endif %}

                    {{ message }}
                  {% endfor %}

                </div>
              {% endif %}
            {% endwith %}
    
          </form>

      </div>
    </div>
  </div>

</div>
{% endblock dash_content %}